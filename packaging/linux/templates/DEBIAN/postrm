#!/bin/bash
# ============================================================================
# Post-removal script for Audex DEB package
# ============================================================================

set -e

# ============================================================================
# Colors
# ============================================================================

GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m'

# ============================================================================
# Handle Removal
# ============================================================================

case "$1" in
    purge)
        echo ""
        echo -e "${BLUE}üßπ Purging Audex system files...${NC}"
        echo ""

        # Remove system directories
        rm -rf /etc/audex
        rm -rf /var/lib/audex
        rm -rf /var/log/audex
        rm -rf /usr/lib/audex

        # Reload systemd
        systemctl daemon-reload 2>/dev/null || true

        echo -e "${GREEN}‚úì System files removed${NC}"
        echo ""
        echo -e "${YELLOW}Note: User data has been removed${NC}"
        ;;

    remove)
        echo ""
        echo -e "${GREEN}‚úÖ Audex removed${NC}"
        echo ""
        echo -e "${BLUE}‚ÑπÔ∏è  Configuration preserved in:${NC}"
        echo "   /etc/audex/"
        echo ""
        echo -e "${YELLOW}To completely remove all data, run:${NC}"
        echo "   sudo apt purge audex"
        echo ""
        ;;
esac

exit 0
