#!/bin/bash
# ============================================================================
# Post-removal script for Audex DEB package
# ============================================================================

set -e

# ============================================================================
# Colors
# ============================================================================

GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m'

# ============================================================================
# Handle Removal
# ============================================================================

case "$1" in
    purge)
        echo ""
        echo -e "${BLUE}üßπ Purging Audex system files...${NC}"
        echo ""

        # Remove system directories
        rm -rf /etc/audex
        rm -rf /opt/audex

        # Remove systemd service files
        rm -f /usr/lib/systemd/system/audex@.service

        # Reload systemd
        systemctl daemon-reload 2>/dev/null || true

        echo -e "${GREEN}‚úì System files removed${NC}"
        echo ""
        echo -e "${YELLOW}Note: User data preserved in home directories${NC}"
        echo "To remove user data, manually delete:"
        echo "  ~/.config/audex"
        echo "  ~/.local/share/audex"
        ;;

    remove)
        echo ""
        echo -e "${GREEN}‚úÖ Audex removed${NC}"
        echo ""
        echo -e "${BLUE}‚ÑπÔ∏è  User data preserved in:${NC}"
        echo "   ~/.config/audex/"
        echo "   ~/.local/share/audex/"
        echo ""
        echo -e "${YELLOW}To completely remove all data, run:${NC}"
        echo "   sudo apt purge audex"
        echo "   rm -rf ~/.config/audex ~/.local/share/audex"
        echo ""
        ;;
esac

exit 0
